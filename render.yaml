services:
  # -----------------------------
  # Backend Service (FastAPI)
  # -----------------------------
  - type: web
    name: supoclip-backend-production
    env: docker
    dockerContext: .
    dockerfilePath: ./Dockerfile
    plan: free
    region: oregon
    numInstances: 1
    healthCheckPath: /health/db

    envVars:
      - key: PYTHONUNBUFFERED
        value: 1
      
      # ---- APP SETTINGS ----
      - key: LLM
        value: openai:gpt-4
      - key: WHISPER_MODEL_SIZE
        value: base
      - key: TEMP_DIR
        value: /tmp/uploads


  # -----------------------------
  # Frontend Service (Next.js)
  # -----------------------------
  - type: web
    name: supoclip-frontend-production
    env: docker
    dockerContext: ./frontend
    dockerfilePath: ./frontend/Dockerfile
    plan: free
    region: oregon
    numInstances: 1

    envVars:
      - key: NODE_ENV
        value: production

      # Backend URL for API calls (Set manually after deployment)
      # - key: NEXT_PUBLIC_API_URL
      #   value: https://supoclip-backend-production.onrender.com

      # Auth config
      # - key: BETTER_AUTH_URL
      #   value: https://supoclip-frontend-production.onrender.com
      - key: BETTER_AUTH_SECRET
        generateValue: true


# ---------------------------------------------------
# ðŸš¨ Removed:
# - Built-in Render PostgreSQL
# - Render Redis
# Because you're using Supabase + Railway instead
# ---------------------------------------------------
